# StackIt Backend Environment Configuration
# Copy this file to .env and update values for your environment

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application Environment
NODE_ENV=development
APP_NAME=StackIt
APP_VERSION=1.0.0

# Server Configuration
PORT=3000
HOST=0.0.0.0

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Configuration
DB_HOST=localhost
DB_PORT=5432
DB_USER=stackit_user
DB_PASSWORD=stackit_password

# Database Names
USER_DB_NAME=stackit_users
CONTENT_DB_NAME=stackit_content

# Database Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis Database Assignments
REDIS_SESSION_DB=0
REDIS_CACHE_DB=1
REDIS_NOTIFICATION_DB=2
REDIS_VOTE_DB=3

# Redis Connection Pool
REDIS_POOL_MIN=1
REDIS_POOL_MAX=5
REDIS_CONNECT_TIMEOUT=5000

# =============================================================================
# DOCKER CONFIGURATION (when using Docker)
# =============================================================================

# Docker PostgreSQL
DOCKER_DB_HOST=postgres
DOCKER_DB_PORT=5432

# Docker Redis
DOCKER_REDIS_HOST=redis
DOCKER_REDIS_PORT=6379

# Docker Network
DOCKER_NETWORK=stackit_network

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Session Configuration
SESSION_SECRET=your-super-secret-session-key-change-this-in-production
SESSION_TIMEOUT=86400000

# Password Security
BCRYPT_ROUNDS=12
PASSWORD_MIN_LENGTH=8

# Rate Limiting
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# NOTIFICATION SYSTEM
# =============================================================================

# Notification Settings
NOTIFICATION_ENABLED=true
NOTIFICATION_BATCH_SIZE=50
NOTIFICATION_CLEANUP_DAYS=30

# Real-time Updates
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=3001

# Notification Types (enable/disable globally)
ENABLE_ANSWER_NOTIFICATIONS=true
ENABLE_COMMENT_NOTIFICATIONS=true
ENABLE_MENTION_NOTIFICATIONS=true
ENABLE_VOTE_NOTIFICATIONS=true

# =============================================================================
# API CONFIGURATION
# =============================================================================

# API Versioning
API_VERSION=v1
API_PREFIX=/api

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
CORS_CREDENTIALS=true

# Request Limits
MAX_REQUEST_SIZE=10mb
MAX_JSON_SIZE=1mb

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=false
LOG_FILE_PATH=./logs/app.log

# Database Logging
DB_LOG_ENABLED=false
DB_LOG_SLOW_QUERIES=true
DB_SLOW_QUERY_THRESHOLD=1000

# Performance Monitoring
ENABLE_METRICS=false
METRICS_PORT=9090

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development Features
DEV_SEED_DATABASE=false
DEV_MOCK_DATA=false
DEV_DEBUG_MODE=false

# Hot Reload
DEV_WATCH_FILES=true
DEV_RELOAD_ON_CHANGE=true

# Testing
TEST_DB_NAME=stackit_test
TEST_PARALLEL=false

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Production Security
PROD_HTTPS_ONLY=true
PROD_SECURE_COOKIES=true
PROD_TRUST_PROXY=true

# Production Performance
PROD_CLUSTER_MODE=false
PROD_WORKER_PROCESSES=auto

# Production Monitoring
PROD_HEALTH_CHECK_ENABLED=true
PROD_METRICS_ENABLED=true

# =============================================================================
# EXTERNAL SERVICES (Future Features)
# =============================================================================

# Email Service (for future email notifications)
EMAIL_ENABLED=false
EMAIL_SERVICE=
EMAIL_FROM=
EMAIL_API_KEY=

# File Storage (for future file uploads)
FILE_STORAGE_TYPE=local
FILE_STORAGE_PATH=./uploads
FILE_MAX_SIZE=5mb

# Search Service (for future search features)
SEARCH_ENABLED=false
SEARCH_INDEX_NAME=stackit

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
FEATURE_USER_REGISTRATION=true
FEATURE_EMAIL_VERIFICATION=false
FEATURE_PASSWORD_RESET=true

# Content Features
FEATURE_QUESTION_EDITING=true
FEATURE_ANSWER_EDITING=true
FEATURE_COMMENT_EDITING=true
FEATURE_CONTENT_DELETION=true

# Social Features
FEATURE_USER_PROFILES=true
FEATURE_USER_REPUTATION=true
FEATURE_USER_BADGES=false

# Advanced Features
FEATURE_SEARCH=false
FEATURE_TAGS_AUTOCOMPLETE=true
FEATURE_CONTENT_MODERATION=false
FEATURE_USER_BLOCKING=false

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache TTL Settings (in seconds)
CACHE_USER_TTL=3600
CACHE_QUESTION_TTL=1800
CACHE_ANSWER_TTL=1800
CACHE_VOTE_TTL=300
CACHE_NOTIFICATION_COUNT_TTL=300

# Cache Prefixes
CACHE_PREFIX_USER=user:
CACHE_PREFIX_QUESTION=question:
CACHE_PREFIX_ANSWER=answer:
CACHE_PREFIX_NOTIFICATION=notification:

# =============================================================================
# BACKUP & MAINTENANCE
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# Maintenance Windows
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=StackIt is currently under maintenance. Please try again later.

# =============================================================================
# EXAMPLES FOR DIFFERENT ENVIRONMENTS
# =============================================================================

# For Docker Development:
# DB_HOST=postgres
# REDIS_HOST=redis

# For Production:
# NODE_ENV=production
# DB_HOST=your-production-db-host
# REDIS_HOST=your-production-redis-host
# JWT_SECRET=your-very-secure-production-jwt-secret
# SESSION_SECRET=your-very-secure-production-session-secret

# For Testing:
# NODE_ENV=test
# DB_NAME=stackit_test
# LOG_LEVEL=error
